{% extends "base.html" %}
{% block title %}New Freelancer Payout · BV Management{% endblock %}
{% block content %}
  <div class="h1">New Freelancer Payout</div>
  <form method="post" enctype="multipart/form-data" action="{{ url_for('add_freelancer_payout') }}" class="card section">
    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
    <div class="grid" style="grid-template-columns:1fr 1fr">
      <div><label>Date</label><input type="date" name="date" required></div>
      <div><label>Gross amount (EUR)</label><input type="number" step="0.01" name="amount_gross" required></div>

      <div>
        <label>VAT rate</label>
        <select name="vat_rate">
          <option value="0" selected>0% (non‑EU typical)</option>
          <option value="21">21%</option>
          <option value="9">9%</option>
        </select>
      </div>
      <div><label>Currency</label><select name="currency"><option value="EUR" selected>EUR</option></select></div>

      <div><label>Freelancer name</label><input name="freelancer_name" required></div>

      <div>
        <label>Link to Invoice</label>
        <select name="invoice_id">
          <option value="">— none —</option>
          {% for inv in invoices %}
            <option value="{{ inv.id }}" {% if invoice_id and inv.id==invoice_id %}selected{% endif %}>
              {{ inv.invoice_no }} — {{ inv.client_name }} ({{ inv.issue_date }})
            </option>
          {% endfor %}
        </select>
      </div>

      <div>
        <label>Payment method</label>
        <select name="method">
          <option value="bank">Bank</option>
          <option value="western_union">Western Union</option>
          <option value="cash">Cash</option>
          <option value="other">Other</option>
        </select>
      </div>
      <div><label>Reference</label><input name="reference" placeholder="MTCN / SWIFT / deposit slip"></div>

      <div style="grid-column:1 / span 2"><label>Notes</label><input name="notes" placeholder="Describe the work / project"></div>
      <div style="grid-column:1 / span 2"><label>Receipt/Proof (PDF/JPG/PNG)</label><input type="file" name="receipt" accept=".pdf,.png,.jpg,.jpeg"></div>
    </div>

    <div class="row right section"><button>Save Payout</button></div>
  </form>
{% endblock %}
